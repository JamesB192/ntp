#! /bin/sh

BUILD_ARGS="$@"

#   bridgeport     sparc-sun-solaris2.6
#   bunnylou       alpha-dec-osf4.0
# * churchy        alpha-dec-osf4.0
#   cowbird        alpha-dec-osf4.0
#   grundoon       sparc-sun-sunos4.1.3
# * hepzibah       freebsd-2.2.5
# * malarky        sparc-sun-solaris2.7
# * pogo           sparc-sun-solaris2.7
# * porkypine      mips-dec-ultrix4.4
# * rackety        sparc-sun-sunos4.1.3/cc
# * snavely        hppa1.1-hp-hpux10.20
#   whimsy         sparc-sun-solaris2.6

c_d=`pwd`

SIG=`perl -e 'print rand'`
echo $SIG > .buildkey

case "$LIST" in
 '') LIST="churchy hepzibah malarky pogo porkypine rackety snavely" ;;
esac

for i in $LIST
do
    echo $i
    ssh $i "cd $c_d ; ./build $SIG --enable-parse-clocks $BUILD_ARGS" &
    ssh $i "cd $c_d ; ./build $SIG --enable-parse-clocks --with-crypto=autokey $BUILD_ARGS" &
    ssh $i "cd $c_d ; ./build $SIG --enable-parse-clocks --with-crypto=md5 $BUILD_ARGS" &
done
