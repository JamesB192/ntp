<html><head><title>
<tt>ntp_genkeys</tt> - generate public and private keys
</title></head><body><h3>
<tt>ntp_genkeys</tt> - generate public and private keys
</h3><hr>

<h4>Synopsis</h4>

<tt>ntp_genkeys</tt>

<H4>Description</H4>

<p>The cryptographic values used by the <tt>autokey</tt> scheme are
incorporated as a set of four files generated by the
<tt>ntp_genkeys</tt> program, including <tt>ntp.keys</tt> containing the
DES/MD5 private keys, <tt>ntpkey</tt> containing the RSA private key,
<tt>ntpkey_<i>host</i></tt> containing the RSA public key, where
<tt><i>host</i></tt> is the DNS name of the generating machine, and
<tt>ntpkey_dh</tt> containing the parameters for the Diffie-Hellman key-
agreement algorithm. The files contain cryptographic values generated by
the algorithms of the <tt>rsaref20</tt> package and are in printable
ASCII format. Since the algorythms are seeded by the system clock, each
run of this program will produce a different outcome. There are no
options or frills of any sort, although a number of options would seem
to be appropriate.

<p>The <tt>ntp.keys</tt> file contains 16 MD5 keys. Each key consists of
16 characters randomized over the ASCII 95-character printing subset.
The file is read by the daemon at the location specified by the
<tt>keys</tt> configuration file command and made visible only to root.
An additional key consisting of a easily remembered password should be
added by hand for use with the <tt>ntpq</tt> and <tt>ntpdc</tt>
programs. The file must be distributed by secure means to other servers
and clients sharing the same security compartment. While the key
identifiers for MD5 and DES keys must be in the range 1-65534,
inclusive, the <tt>ntp_genkeys</tt> program uses only the identifiers
from 1 to 16. The key identifier for each association is specified as
the key argument in the <tt>server</tt> or peer configuration file
command.

<p>The <tt>ntpkey</tt> file contains the RSA private key. It is read by
the daemon at the location specified by the <tt>privatekey</tt> argument
of the <tt>crypto</tt> configuration file command and made visible only
to root. This file is useful only to the machine that generated it and
never shared with any other daemon or application program.

<p>The <tt>ntpkey_<i>host</i></tt> file contains the RSA public key,
where <tt><i>host</i></tt> is the DNS name of the host that generated
it. The file is read by the daemon at the location specified by the
<tt>publickey</tt> argument to the <tt>server</tt> or <tt>peer</tt>
configuration file command. This file can be widely distributed and
stored without using secure means, since the data are public values.

<p>The <tt>ntp_dh</tt> file contains two Diffie-Hellman parameters: the
prime modulus and the generator. The file is read by the daemon at the
location specified by the <tt>dhparams</tt> argument of the
<tt>crypto</tt> configuration file command. The file can be distributed
by insecure means to other servers and clients sharing the same key
agreement compartment, since the data are public values.

<p>The file formats all begin with two lines, the first containing the
generating system DNS name and the second the datestamp. Lines beginning
with <tt>#</tt> are considered comments and ignored by the daemon. In
the <tt>ntp.keys</tt> file, the next 16 lines contain the MD5 keys in
order. In the <tt>ntpkey</tt> and <tt>ntpkey_<i>host</i></tt> files, the
next line contains the modulus length in bits followed by the key as a
PEM encoded string. In the <tt>ntpkey_dh</tt> file, the next line
contains the prime length in bytes followed by the prime as a PEM
encoded string, and the next and final line contains the generator
length in bytes followed by the generator as a PEM encoded string.

<p>Note: See the file <tt>./source/rsaref.h</tt> in the
<tt>rsaref20</tt> package for explanation of return values, if
necessary.

<h4>Files</h4>

The RSA Laboratories package <tt>rsaref20</tt> of cryptographic routines
is necessary in order to build and use this program.

<h4>Bugs</h4>

It can take quite a while to generate the RSA public/private key pair
and Diffie-Hellman parameters, from a few seconds on a modern
workstation to several minutes on older machines.

<hr><a href=index.htm><img align=left src=pic/home.gif></a><address><a
href=mailto:mills@udel.edu> David L. Mills &lt;mills@udel.edu&gt;</a>
</address></a></body></html>
