<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Ntptrace User&rsquo;s Manual</title>

<meta name="description" content="Ntptrace User&rsquo;s Manual">
<meta name="keywords" content="Ntptrace User&rsquo;s Manual">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="#Top" rel="start" title="Top">
<link href="dir.html#Top" rel="up" title="(dir)">
<link href="dir.html#Top" rel="prev" title="(dir)">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
span:hover a.copiable-link {visibility: visible}
ul.toc-numbered-mark {list-style: none}
-->
</style>


</head>

<body lang="en">





<div class="top-level-extent" id="Top">
<div class="nav-panel">
<p>
Previous: <a href="dir.html#Top" accesskey="p" rel="prev">(dir)</a>, Up: <a href="dir.html#Top" accesskey="u" rel="up">(dir)</a> &nbsp; </p>
</div>
<h1 class="top" id="Simple-Network-Time-Protocol-User-Manual"><span>Simple Network Time Protocol User Manual<a class="copiable-link" href="#Simple-Network-Time-Protocol-User-Manual"> &para;</a></span></h1>

<p>This document describes the use of the NTP Project&rsquo;s <code class="code">ntptrace</code> program.
This document applies to version 4.2.8p17 of <code class="code">ntptrace</code>.
</p>


<div class="element-shortcontents" id="SEC_Shortcontents">
<h2 class="shortcontents-heading">Short Table of Contents</h2>

<div class="shortcontents">
<ul class="toc-numbered-mark">
<li><a id="stoc-Invoking-ntptrace" href="#ntptrace-Invocation">1 Invoking ntptrace</a></li>
</ul>
</div>
</div>
<hr>
<div class="chapter-level-extent" id="ntptrace-Invocation">
<div class="nav-panel">
<p>
Up: <a href="#Top" accesskey="u" rel="up">Simple Network Time Protocol User Manual</a> &nbsp; </p>
</div>
<h2 class="chapter section-level-set-chapter" id="Invoking-ntptrace"><span>1 Invoking ntptrace<a class="copiable-link" href="#Invoking-ntptrace"> &para;</a></span></h2>
<a class="index-entry-id" id="index-ntptrace"></a>
<a class="index-entry-id" id="index-Trace-peers-of-an-NTP-server"></a>

<p><code class="code">ntptrace</code> is a perl script that uses the ntpq utility program to follow
the chain of NTP servers from a given host back to the primary time source. For
ntptrace to work properly, each of these servers must implement the NTP Control
and Monitoring Protocol specified in RFC 1305 and enable NTP Mode 6 packets.
</p>
<p>If given no arguments, ntptrace starts with localhost. Here is an example of
the output from ntptrace:
</p>
<div class="example">
<pre class="example-preformatted">% ntptrace localhost: stratum 4, offset 0.0019529, synch distance 0.144135
server2ozo.com: stratum 2, offset 0.0124263, synch distance 0.115784 usndh.edu:
stratum 1, offset 0.0019298, synch distance 0.011993, refid 'WWVB'
</pre></div>

<p>On each line, the fields are (left to right): the host name, the host stratum,
the time offset between that host and the local host (as measured by
<code class="code">ntptrace</code>; this is why it is not always zero for &quot;localhost&quot;), the host
synchronization distance, and (only for stratum-1 servers) the reference clock
ID. All times are given in seconds. Note that the stratum is the server hop
count to the primary source, while the synchronization distance is the
estimated error relative to the primary source. These terms are precisely
defined in RFC-1305.
</p>

<p>This section was generated by <strong class="strong">AutoGen</strong>,
using the <code class="code">agtexi-cmd</code> template and the option descriptions for the <code class="code">ntptrace</code> program.
</p>

<ul class="mini-toc">
<li><a href="#ntptrace-usage" accesskey="1">ntptrace help/usage (<samp class="option">--help</samp>)</a></li>
</ul>
<hr>
<div class="section-level-extent" id="ntptrace-usage">
<div class="nav-panel">
<p>
Up: <a href="#ntptrace-Invocation" accesskey="u" rel="up">Invoking ntptrace</a> &nbsp; </p>
</div>
<h3 class="section subsection-level-set-section" id="ntptrace-help_002fusage-_0028_002d_002dhelp_0029"><span>1.1 ntptrace help/usage (<samp class="option">--help</samp>)<a class="copiable-link" href="#ntptrace-help_002fusage-_0028_002d_002dhelp_0029"> &para;</a></span></h3>
<a class="index-entry-id" id="index-ntptrace-help"></a>

<p>This is the automatically generated usage text for ntptrace.
</p>
<p>The text printed is the same whether selected with the <code class="code">help</code> option
(<samp class="option">--help</samp>) or the <code class="code">more-help</code> option (<samp class="option">--more-help</samp>).  <code class="code">more-help</code> will print
the usage text by passing it through a pager program.
<code class="code">more-help</code> is disabled on platforms without a working
<code class="code">fork(2)</code> function.  The <code class="code">PAGER</code> environment variable is
used to select the program, defaulting to <samp class="file">more</samp>.  Both will exit
with a status code of 0.
</p>
<div class="example">
<pre class="example-preformatted">ntptrace - Trace peers of an NTP server - Ver. 4.2.8p17
USAGE: ntptrace [ -&lt;flag&gt; [&lt;val&gt;] | --&lt;name&gt;[{=| }&lt;val&gt;] ]... [host]

    -n, --numeric                Print IP addresses instead of hostnames
    -m, --max-hosts=num          Maximum number of peers to trace
    -r, --host=str               Single remote host
    -?, --help                   Display usage information and exit
        --more-help              Pass the extended usage text through a pager

Options are specified by doubled hyphens and their name or by a single
hyphen and the flag character.
</pre></div>

<ul class="mini-toc">
<li><a href="#ntptrace-numeric" accesskey="1">numeric option (-n)</a></li>
<li><a href="#ntptrace-max_002dhosts" accesskey="2">max-hosts option (-m)</a></li>
<li><a href="#ntptrace-host" accesskey="3">host option (-r)</a></li>
<li><a href="#ntptrace-exit-status" accesskey="4">ntptrace exit status</a></li>
</ul>
<hr>
<div class="subsection-level-extent" id="ntptrace-numeric">
<div class="nav-panel">
<p>
Next: <a href="#ntptrace-max_002dhosts" accesskey="n" rel="next">max-hosts option (-m)</a>, Up: <a href="#ntptrace-usage" accesskey="u" rel="up">ntptrace help/usage (<samp class="option">--help</samp>)</a> &nbsp; </p>
</div>
<h4 class="subsection" id="numeric-option-_0028_002dn_0029"><span>1.1.1 numeric option (-n)<a class="copiable-link" href="#numeric-option-_0028_002dn_0029"> &para;</a></span></h4>
<a class="index-entry-id" id="index-ntptrace_002dnumeric"></a>

<p>This is the &ldquo;print ip addresses instead of hostnames&rdquo; option.
Output hosts as dotted-quad numeric format rather than converting to
the canonical host names.
</p><hr>
</div>
<div class="subsection-level-extent" id="ntptrace-max_002dhosts">
<div class="nav-panel">
<p>
Next: <a href="#ntptrace-host" accesskey="n" rel="next">host option (-r)</a>, Previous: <a href="#ntptrace-numeric" accesskey="p" rel="prev">numeric option (-n)</a>, Up: <a href="#ntptrace-usage" accesskey="u" rel="up">ntptrace help/usage (<samp class="option">--help</samp>)</a> &nbsp; </p>
</div>
<h4 class="subsection" id="max_002dhosts-option-_0028_002dm_0029"><span>1.1.2 max-hosts option (-m)<a class="copiable-link" href="#max_002dhosts-option-_0028_002dm_0029"> &para;</a></span></h4>
<a class="index-entry-id" id="index-ntptrace_002dmax_002dhosts"></a>

<p>This is the &ldquo;maximum number of peers to trace&rdquo; option.
This option takes a number argument.
This option has no &lsquo;<samp class="samp">doc</samp>&rsquo; documentation.
</p><hr>
</div>
<div class="subsection-level-extent" id="ntptrace-host">
<div class="nav-panel">
<p>
Next: <a href="#ntptrace-exit-status" accesskey="n" rel="next">ntptrace exit status</a>, Previous: <a href="#ntptrace-max_002dhosts" accesskey="p" rel="prev">max-hosts option (-m)</a>, Up: <a href="#ntptrace-usage" accesskey="u" rel="up">ntptrace help/usage (<samp class="option">--help</samp>)</a> &nbsp; </p>
</div>
<h4 class="subsection" id="host-option-_0028_002dr_0029"><span>1.1.3 host option (-r)<a class="copiable-link" href="#host-option-_0028_002dr_0029"> &para;</a></span></h4>
<a class="index-entry-id" id="index-ntptrace_002dhost"></a>

<p>This is the &ldquo;single remote host&rdquo; option.
This option takes a string argument.
This option has no &lsquo;<samp class="samp">doc</samp>&rsquo; documentation.
</p><hr>
</div>
<div class="subsection-level-extent" id="ntptrace-exit-status">
<div class="nav-panel">
<p>
Previous: <a href="#ntptrace-host" accesskey="p" rel="prev">host option (-r)</a>, Up: <a href="#ntptrace-usage" accesskey="u" rel="up">ntptrace help/usage (<samp class="option">--help</samp>)</a> &nbsp; </p>
</div>
<h4 class="subsection" id="ntptrace-exit-status-1"><span>1.1.4 ntptrace exit status<a class="copiable-link" href="#ntptrace-exit-status-1"> &para;</a></span></h4>

<p>One of the following exit values will be returned:
</p><dl class="table">
<dt>&lsquo;<samp class="samp">0 (EXIT_SUCCESS)</samp>&rsquo;</dt>
<dd><p>Successful program execution.
</p></dd>
<dt>&lsquo;<samp class="samp">1 (EXIT_FAILURE)</samp>&rsquo;</dt>
<dd><p>The operation failed or the command syntax was not valid.
</p></dd>
</dl>
</div>
</div>
</div>
</div>



</body>
</html>
