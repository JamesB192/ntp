<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>NTP Symmetric Key</title>

<meta name="description" content="NTP Symmetric Key">
<meta name="keywords" content="NTP Symmetric Key">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="#Top" rel="start" title="Top">
<link href="dir.html#Top" rel="up" title="(dir)">
<link href="#ntp_002ekeys-Description" rel="next" title="ntp.keys Description">
<link href="dir.html#Top" rel="prev" title="(dir)">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
kbd.kbd {font-style: oblique}
span:hover a.copiable-link {visibility: visible}
ul.toc-numbered-mark {list-style: none}
-->
</style>


</head>

<body lang="en">





<div class="top-level-extent" id="Top">
<div class="nav-panel">
<p>
Next: <a href="#ntp_002ekeys-Description" accesskey="n" rel="next">Description</a>, Previous: <a href="dir.html#Top" accesskey="p" rel="prev">(dir)</a>, Up: <a href="dir.html#Top" accesskey="u" rel="up">(dir)</a> &nbsp; </p>
</div>
<h1 class="top" id="NTP_0027s-Symmetric-Key-File-User-Manual"><span>NTP&rsquo;s Symmetric Key File User Manual<a class="copiable-link" href="#NTP_0027s-Symmetric-Key-File-User-Manual"> &para;</a></span></h1>

<p>This document describes the symmetric key file for the NTP Project&rsquo;s
<code class="code">ntpd</code> program.
</p>
<p>This document applies to version 4.2.8p17 of <code class="code">ntp.keys</code>.
</p>


<div class="element-shortcontents" id="SEC_Shortcontents">
<h2 class="shortcontents-heading">Short Table of Contents</h2>

<div class="shortcontents">
<ul class="toc-numbered-mark">
<li><a id="stoc-Description" href="#ntp_002ekeys-Description">1 Description</a></li>
</ul>
</div>
</div>
<hr>
<div class="chapter-level-extent" id="ntp_002ekeys-Description">
<div class="nav-panel">
<p>
Previous: <a href="#Top" accesskey="p" rel="prev">NTP&rsquo;s Symmetric Key File User Manual</a>, Up: <a href="#Top" accesskey="u" rel="up">NTP&rsquo;s Symmetric Key File User Manual</a> &nbsp; </p>
</div>
<h2 class="chapter section-level-set-chapter" id="Description"><span>1 Description<a class="copiable-link" href="#Description"> &para;</a></span></h2>

<p>The name and location of the symmetric key file for <code class="code">ntpd</code> can
be specified in a configuration file, by default <code class="code">/etc/ntp.keys</code>.
</p>
<ul class="mini-toc">
<li><a href="#ntp_002ekeys-Notes" accesskey="1">Notes about ntp.keys</a></li>
</ul>
<hr>
<div class="section-level-extent" id="ntp_002ekeys-Notes">
<div class="nav-panel">
<p>
Up: <a href="#ntp_002ekeys-Description" accesskey="u" rel="up">Description</a> &nbsp; </p>
</div>
<h3 class="section" id="Notes-about-ntp_002ekeys"><span>1.1 Notes about ntp.keys<a class="copiable-link" href="#Notes-about-ntp_002ekeys"> &para;</a></span></h3>
<a class="index-entry-id" id="index-ntp_002ekeys"></a>
<a class="index-entry-id" id="index-NTP-symmetric-key-file-format"></a>



<p>This document describes the format of an NTP symmetric key file.
For a description of the use of this type of file, see the
&quot;Authentication Support&quot;
section of the
<code class="code">ntp.conf(5)</code>
page.
</p>
<p><code class="code">ntpd(8)</code>
reads its keys from a file specified using the
<code class="code">-k</code>
command line option or the
<code class="code">keys</code>
statement in the configuration file.
While key number 0 is fixed by the NTP standard
(as 56 zero bits)
and may not be changed,
one or more keys numbered between 1 and 65535
may be arbitrarily set in the keys file.
</p>
<p>The key file uses the same comment conventions
as the configuration file.
Key entries use a fixed format of the form
</p>
<div class="example">
<pre class="example-preformatted"><kbd class="kbd">keyno</kbd> <kbd class="kbd">type</kbd> <kbd class="kbd">key</kbd> <kbd class="kbd">opt_IP_list</kbd>
</pre></div>

<p>where
<kbd class="kbd">keyno</kbd>
is a positive integer (between 1 and 65535),
<kbd class="kbd">type</kbd>
is the message digest algorithm,
<kbd class="kbd">key</kbd>
is the key itself, and
<kbd class="kbd">opt_IP_list</kbd>
is an optional comma-separated list of IPs
where the
<kbd class="kbd">keyno</kbd>
should be trusted.
that are allowed to serve time.
Each IP in
<kbd class="kbd">opt_IP_list</kbd>
may contain an optional
<code class="code">/subnetbits</code>
specification which identifies the number of bits for
the desired subnet of trust.
If
<kbd class="kbd">opt_IP_list</kbd>
is empty,
any properly-authenticated message will be
accepted.
</p>
<p>The
<kbd class="kbd">key</kbd>
may be given in a format
controlled by the
<kbd class="kbd">type</kbd>
field.
The
<kbd class="kbd">type</kbd>
<code class="code">MD5</code>
is always supported.
If
<code class="code">ntpd</code>
was built with the OpenSSL library
then any digest library supported by that library may be specified.
However, if compliance with FIPS 140-2 is required the
<kbd class="kbd">type</kbd>
must be either
<code class="code">SHA</code>
or
<code class="code">SHA1</code>.
</p>
<p>What follows are some key types, and corresponding formats:
</p>
<dl class="table">
<dt><code class="code">MD5</code></dt>
<dd><p>The key is 1 to 16 printable characters terminated by
an EOL,
whitespace,
or
a
<code class="code">#</code>
(which is the &quot;start of comment&quot; character).
</p>
</dd>
<dt><code class="code">SHA</code></dt>
<dt><code class="code">SHA1</code></dt>
<dt><code class="code">RMD160</code></dt>
<dd><p>The key is a hex-encoded ASCII string of 40 characters,
which is truncated as necessary.
</p></dd>
</dl>

<p>Note that the keys used by the
<code class="code">ntpq(8)</code>
and
<code class="code">ntpdc(8)</code>
programs are checked against passwords
requested by the programs and entered by hand,
so it is generally appropriate to specify these keys in ASCII format.
</p>
<p>This section was generated by <strong class="strong">AutoGen</strong>,
using the <code class="code">agtexi-cmd</code> template and the option descriptions for the <code class="code">ntp.keys</code> program.
This software is released under the NTP license, &lt;http://ntp.org/license&gt;.
</p>

<ul class="mini-toc">
<li><a href="#ntp_002ekeys-Files" accesskey="1">ntp.keys Files</a></li>
<li><a href="#ntp_002ekeys-See-Also" accesskey="2">ntp.keys See Also</a></li>
<li>ntp.keys Notes</li>
</ul>
<hr>
<div class="subsection-level-extent" id="ntp_002ekeys-Files">
<div class="nav-panel">
<p>
Next: <a href="#ntp_002ekeys-See-Also" accesskey="n" rel="next">ntp.keys See Also</a>, Up: <a href="#ntp_002ekeys-Notes" accesskey="u" rel="up">Notes about ntp.keys</a> &nbsp; </p>
</div>
<h4 class="subsection" id="ntp_002ekeys-Files-1"><span>1.1.1 ntp.keys Files<a class="copiable-link" href="#ntp_002ekeys-Files-1"> &para;</a></span></h4>
<dl class="table">
<dt><samp class="file">/etc/ntp.keys</samp></dt>
<dd><p>the default name of the configuration file
</p></dd>
</dl>
<hr>
</div>
<div class="subsection-level-extent" id="ntp_002ekeys-See-Also">
<div class="nav-panel">
<p>
Next: ntp.keys Notes, Previous: <a href="#ntp_002ekeys-Files" accesskey="p" rel="prev">ntp.keys Files</a>, Up: <a href="#ntp_002ekeys-Notes" accesskey="u" rel="up">Notes about ntp.keys</a> &nbsp; </p>
</div>
<h4 class="subsection" id="ntp_002ekeys-See-Also-1"><span>1.1.2 ntp.keys See Also<a class="copiable-link" href="#ntp_002ekeys-See-Also-1"> &para;</a></span></h4>
<p><code class="code">ntp.conf(5)</code>,
<code class="code">ntpd(1ntpdmdoc)</code>,
<code class="code">ntpdate(1ntpdatemdoc)</code>,
<code class="code">ntpdc(1ntpdcmdoc)</code>,
<code class="code">sntp(1sntpmdoc)</code>
</p><hr>
</div>
<div class="subsection-level-extent">
<div class="nav-panel">
</div>
<h4 class="subsection" id="ntp_002ekeys-Notes-1"><span>1.1.3 ntp.keys Notes<a class="copiable-link" href="#ntp_002ekeys-Notes-1"> &para;</a></span></h4>
<p>This document was derived from FreeBSD.
</p></div>
</div>
</div>
</div>



</body>
</html>
